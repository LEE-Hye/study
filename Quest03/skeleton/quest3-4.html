<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">

	<title>숫자야구 게임</title>

	<style>
		body {
			width: 50%;
			max-width: 800px;
			min-width: 480px;
			margin: 0 auto;
		}
	</style>
</head>

<body>
	<h1>숫자야구 게임</h1>

	<li style="margin-bottom:5px;">게임시작을 누르면 랜덤값으로 세자리의 숫자가 지정됩니다.</li>
	<li style="margin-bottom:5px;">랜덤값 세자리에 표시되는 각각의 숫자는 0이 나올 수 없으며 서로 중복값이 있어서는 안됩니다.</li>
	<li style="margin-bottom:5px;">유저는 임의 세자리를 기록해서 맞는지 결과를 확인합니다.</li>
	<li style="margin-bottom:5px;">회별로 기록한 숫자와 설정된숫자를 비교해서 상황을 표현해 줍니다.</li>
	<li style="margin-bottom:5px;">야구게임이니 9회안에 맞추고 실패시 패배입니다.</li>
	<div class="setDigitForm">
		<input type="submit" value="게임시작" class="setDigitSubmit">
	</div>

	<div class="form" style="margin-top:40px;">
		<input type="text" id="guessField" class="guessField">
		<input type="submit" value="정답확인" class="guessSubmit">
	</div>

	<div class="resultArea" style="margin-top:40px;">
		<span>정답여부는 여기에!!</span>
	</div>

	<script>
		/**
		  # 재령씨를 위한 게임룰 #
		  
				정답이 176 이라고 했을때
			1. 485 - 들어맞는 숫자가 아예 없으므로 아웃. 이때부터 4, 5, 8이 후보에서 빠지므로 남는 숫자는 1, 2, 3, 6, 7, 9다  (resultArea 안에 다음과 같이 표현  1회: OUT)
			2. 312 - 1이 있지만 위치가 다르므로 1볼. (resultArea 안에 1줄 추가  2회: 1볼)
			3. 167 - 숫자는 전부 맞지만 위치는 1만 맞고 나머지 둘은 다르므로 1스트라이크 2볼. (resultArea 안에 1줄 추가  3회: 1S 2B)
				4. 671 - 숫자는 전부 맞지만 위치는 다르므로 3볼. (resultArea 안에 1줄 추가  4회: 3B)
			5. 176 - 전부 맞으므로 승리 (resultArea 안에 1줄 추가  5회: 3S 승리!)     
		*/

		/** TODO: 여기에 게임이 작동될 수 있도록 스크립트를 짜보세요  */

		/**
		 * 1. 게임 시작 함수
		 *  1-1. 2함수 불러오기
		 * 2. 중복값 없는 랜덤값 저장 함수
		 * 3. 배열에 저장된 값과 사용자가 입력한 값 비교하는 함수
		 *  3-1. 유저의 세자리 입력값 받아오기
		 *  3-2. 비교 후 결과 확인
		 *  3-3. 결과 여부 화면에 출력
		 *  3-4. 9회 안에 성공하지 못했을 때 게임 종료
		 */

		/** 1. 게임 시작 함수 */
		var gameStart; 		// 게임시작 버튼

		/** 2. 중복값 없는 랜덤값 저장 함수 */
		var randomNum;  	// 랜덤값 뽑기
		var randomArr = []; // 뽑은 랜덤값 배열에 담기
		var i; 				// for문 변수

		/** 3. 사용자가 입력한 값 추출 비교 함수 */
		var guessValue; 	// 사용자의 추측 값
		var guessBtn; 		// 추측한 값 정답 확인 버튼
		var guess1;			// 사용자의 추측 값 1의 자리
		var guess10; 		// 사용자의 추측 값 10의 자리
		var guess100; 		// 사용자의 추측 값 100의 자리

		gameStart = document.getElementsByClassName('setDigitSubmit')[0]; 	// 1. 게임시작 버튼
		guessBtn = document.getElementsByClassName('guessSubmit')[0]; 		// 3. 추측한 값 정답 확인 버튼


		
		/** 2. 중복 값 없는 랜덤 값 저장하는 함수 */
		// 중복 제거하는 방법 또 찾아보기
		function randomHamsu() {
			for (i = 0; i < 3; i++) {
				randomNum = Math.floor(Math.random() * 9) + 1;
				if (randomArr.indexOf(randomNum) === -1) { // indexof : 배열에서 지정된 요소를 찾을 수 있는 첫 번째 인덱스 반환. 배열에 존재하지 않으면 -1을 반환
					randomArr.push(randomNum);
				} else {
					i--;
				}
			}
			
			if (randomArr.length > 3) {
				
				randomArr.length = 3;
			}
			console.log(randomArr);
			return randomArr;

		};

		/** 1. 게임시작 버튼 클릭시 랜덤 값 저장하는 함수 불러오기 */
		gameStart.addEventListener('click', function () {
		
				randomHamsu();
			
		});



		/** 3. 배열에 저장된 값과 사용자가 입력한 값 비교 함수 */
		guessBtn.addEventListener('click', function () {
			guessValue = Number(document.getElementById('guessField').value);
			console.log('guess값 잘 들어와지는지 : ' + guessValue);

			guess100 = parseInt(guessValue / 100);
			console.log('100의 자리 : ' + guess100);
			guess10 = parseInt((guessValue - guess100 * 100) / 10);
			console.log('10의 자리 : ' + guess10);
			guess1 = guessValue -  guess100 * 100 - guess10 * 10;
			console.log('1의 자리 : ' + guess1);

			console.log(randomHamsu());


		})

	</script>
</body>

</html>